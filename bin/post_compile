#!/bin/bash

# Встановлюємо змінну середовища DJANGO_SETTINGS_MODULE для правильного шляху до налаштувань
export DJANGO_SETTINGS_MODULE=kebab_app.settings

# Додаємо кореневу директорію проекту в PYTHONPATH
export PYTHONPATH=/tmp/build_9005ab23

echo "Starting post_compile script..."

# Перевірка вмісту кореневої директорії
ls -la /

# Пошук файлу manage.py
MANAGE_PY_PATH=$(find / -name manage.py 2>/dev/null)
echo "Found manage.py at: $MANAGE_PY_PATH"

# Виконуємо команду для компіляції файлів перекладу, якщо manage.py було знайдено
if [ -n "$MANAGE_PY_PATH" ]; then
    python "$MANAGE_PY_PATH" compilemessages
else
    echo "manage.py not found. Skipping compilemessages."
fi

echo "Finished compilemessages step."
