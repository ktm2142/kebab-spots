#!/bin/bash

# Встановлюємо змінну середовища DJANGO_SETTINGS_MODULE для правильного шляху до налаштувань
export DJANGO_SETTINGS_MODULE=kebab_app.src.settings

# Додаємо кореневу директорію проекту в PYTHONPATH
export PYTHONPATH=/app/kebab_app

echo "Starting post_compile script..."

# Перевірка вмісту кореневої директорії
ls -la /

# Перевірка вмісту каталогу /app/kebab_app
echo "Checking contents of /app/kebab_app:"
ls -la /app/kebab_app

# Пошук файлу manage.py
MANAGE_PY_PATH="/app/kebab_app/manage.py"
echo "Found manage.py at: $MANAGE_PY_PATH"

# Виведення значення змінної PYTHONPATH
echo "PYTHONPATH is set to: $PYTHONPATH"

# Виконуємо команду для компіляції файлів перекладу, якщо manage.py було знайдено
if [ -e "$MANAGE_PY_PATH" ]; then
    python "$MANAGE_PY_PATH" compilemessages
else
    echo "manage.py not found. Skipping compilemessages."
fi

echo "Finished compilemessages step."
