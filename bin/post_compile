#!/bin/bash

# Знаходимо каталог білду динамічно
BUILD_DIR=$(find /tmp -maxdepth 1 -type d -name "build_*")


# Оновлюємо PYTHONPATH, використовуючи знайдений шлях
export PYTHONPATH="$BUILD_DIR"

echo "Starting post_compile script..."

# Перевірка вмісту каталогу для діагностики
echo "Checking contents of $BUILD_DIR:"
ls -la "$BUILD_DIR"

# Пошук файлу manage.py
MANAGE_PY_PATH="$BUILD_DIR/kebab_app/manage.py"
echo "Found manage.py at: $MANAGE_PY_PATH"

# Виконуємо команду для компіляції файлів перекладу, якщо manage.py було знайдено
if [ -e "$MANAGE_PY_PATH" ]; then
    python "$MANAGE_PY_PATH" compilemessages
else
    echo "manage.py not found. Skipping compilemessages."
fi

echo "Finished compilemessages step."
